<Window x:Class="ShoppingOnline.AdminCustomersWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Quản lý Khách hàng - Admin"
        Height="700" Width="1000"
        WindowStartupLocation="CenterOwner"
        Background="#FFF8F9FA">

	<Window.Resources>
		<!-- Red Theme Colors -->
		<SolidColorBrush x:Key="PrimaryRed" Color="#E31837"/>
		<SolidColorBrush x:Key="DarkRed" Color="#C41230"/>
		<SolidColorBrush x:Key="LightRed" Color="#FFE8EB"/>

		<!-- Modern Button Style -->
		<Style x:Key="ModernButton" TargetType="Button">
			<Setter Property="Background" Value="{StaticResource PrimaryRed}"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Height" Value="35"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Padding" Value="15,0"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Background="{TemplateBinding Background}" 
                                CornerRadius="5"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
							<ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter Property="Background" Value="{StaticResource DarkRed}"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Grid Margin="20">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Header -->
		<StackPanel Grid.Row="0" Margin="0,0,0,20">
			<TextBlock Text="👥 Quản lý Khách hàng" FontSize="24" FontWeight="Bold" 
                       Foreground="{StaticResource PrimaryRed}"/>
			<TextBlock Text="Danh sách và thông tin khách hàng" FontSize="14" Foreground="#FF666666" Margin="0,5,0,0"/>
		</StackPanel>

		<!-- Main Content -->
		<Border Grid.Row="1" Background="White" CornerRadius="10" Padding="20" 
                BorderBrush="#FFE0E0E0" BorderThickness="1">
			<StackPanel>
				<!-- Search and Filter Bar -->
				<Grid Margin="0,0,0,20">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<!-- Search Box -->
					<Grid Grid.Column="0" Margin="0,0,10,0">
						<TextBox x:Name="CustomerSearchBox" FontSize="14" 
                                 Padding="10" VerticalContentAlignment="Center"
                                 TextChanged="CustomerSearch_TextChanged" Margin="0,0,0,-13"/>
						<TextBlock x:Name="CustomerSearchPlaceholder" Text="Tìm kiếm theo tên, email, SĐT..." 
                                   FontSize="14" Foreground="Gray" Margin="15,0,0,0"
                                   VerticalAlignment="Center" HorizontalAlignment="Left"
                                   IsHitTestVisible="False"/>
					</Grid>

					<!-- Add Customer Button -->
					<Button Grid.Column="1" Content="➕ Thêm khách hàng" Style="{StaticResource ModernButton}" 
                            Height="35" Margin="0,0,10,0" Click="AddCustomer_Click"/>

					<!-- Refresh Button -->
					<Button Grid.Column="2" Content="🔄 Refresh" Style="{StaticResource ModernButton}" 
                            Height="35" Click="RefreshCustomers_Click"/>
				</Grid>
				<DataGrid x:Name="CustomersDataGrid" 
                        AutoGenerateColumns="False"
                        HeadersVisibility="Column"
                        GridLinesVisibility="Horizontal"
                        RowBackground="Transparent"
                        AlternatingRowBackground="#FFF8F9FA"
                        BorderThickness="1"
                        BorderBrush="#FFE0E0E0"
                        CanUserAddRows="False"
                        CanUserDeleteRows="False"
                        CanUserReorderColumns="False"
                        CanUserResizeRows="False"
                        SelectionMode="Single"
                        RowHeight="50">
					<DataGrid.Columns>
						<DataGridTextColumn Header="ID" Binding="{Binding CustomerId}" Width="80"/>
						<DataGridTextColumn Header="Tên khách hàng" Binding="{Binding FullName}" Width="200"/>
						<DataGridTextColumn Header="Email" Binding="{Binding Account.Email}" Width="200"/>
						<DataGridTextColumn Header="SĐT" Binding="{Binding Phone}" Width="120"/>
						<DataGridTextColumn Header="Địa chỉ" Binding="{Binding Address}" Width="250"/>
						<DataGridTextColumn Header="Ngày tạo" Binding="{Binding CreatedDate, StringFormat=dd/MM/yyyy}" Width="100"/>

						<!-- Actions Column -->
						<DataGridTemplateColumn Header="Thao tác" Width="200">
							<DataGridTemplateColumn.CellTemplate>
								<DataTemplate>
									<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
										<Button Content="Xem" Style="{StaticResource ModernButton}" 
                                                Height="30" FontSize="11" Margin="2" Width="50"
                                                Click="ViewCustomer_Click" Tag="{Binding CustomerId}"/>
										<Button Content="Sửa" Style="{StaticResource ModernButton}" 
                                                Height="30" FontSize="11" Margin="2" Width="50"
                                                Background="#FFFF9800"
                                                Click="EditCustomer_Click" Tag="{Binding CustomerId}"/>
										<Button Content="Xóa" Style="{StaticResource ModernButton}" 
                                                Height="30" FontSize="11" Margin="2" Width="50"
                                                Background="#FFF44336"
                                                Click="DeleteCustomer_Click" Tag="{Binding CustomerId}"/>
									</StackPanel>
								</DataTemplate>
							</DataGridTemplateColumn.CellTemplate>
						</DataGridTemplateColumn>
					</DataGrid.Columns>
				</DataGrid>

				<!-- Customers DataGrid -->
			</StackPanel>
		</Border>

		<!-- Footer -->
		<StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
			<TextBlock x:Name="CustomerCountText" Text="Tổng: 0 khách hàng" FontSize="14" 
                       VerticalAlignment="Center" Margin="0,0,20,0"/>
			<Button Content="Đóng" Style="{StaticResource ModernButton}" 
                    Background="#FF6C757D" Click="Close_Click"/>
		</StackPanel>
	</Grid>
</Window>